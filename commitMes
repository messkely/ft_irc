tweaked the connection termination behavior so that it allows messages sent right before the remote side close to be processed
added nc related tests